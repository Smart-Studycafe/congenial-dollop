## 진행 상황 공유
 
* 유성민
    * PIR, 가압 센서 사용법 숙지 및 회로 구현
    * 부저 알람 기능 구현 (on ESP32 Device)
    * Shadow 값 송신 예정

* 손민균   
    * 룰 엔진 작성
        *  부저 알람 룰 엔진 작성
        *  PIR, 압력 센서 갱신 룰 엔진 작성
        *  얼굴 인식 갱신 룰 엔진 작성   
        * 이메일 발송 룰 엔진 작성
    * Shadow에 압력값과 밝기가 갱신되고 특정 값 이하면 이메일 발송하게 함.

* 최 율
    * 배포를 중점으로 진행.
        * 데이터베이스 배포
        * EC2 인스턴스에 서버 배포

    * Swagger를 통해 api 명세 진행
    * /health를 제외한 다른 API는 모두 api_key가 필요함.
    * /register 사용 가능 : 사용자의 정보에 관한 rest api
    * /seats : 현재 좌석 현황 관련 API. post, put은 아직 구현되지 않음
    * 부저 울리는 API 작성 해야함.

* 정치현
    * 사용자 GUI 웹 페이지 구현
    * 시간 설정 이후 좌석 사용 예약 기능 구현
    * 사용 시간 Expire 되면 다시 원 상태로 돌아가도록 기능 구현

* 홍은기
    * ESP32-CAM 모듈엔 얼굴 인식 API가 존재하지 않음. 따라서 다른 방법 모색   
    → API가 없다는 것이지 내장함수가 없다는 것이 아님.
    * 얼굴 인식 내장함수를 외부로 꺼내서 얼굴 인식이 되도록 함. 이런 방식으로 하는 경우,   
    프레임 버퍼를 이중으로 사용하기 때문에 스트리밍 시 오류가 발생함. → 프레임 버퍼 수를 늘려 해결.
    * 얼굴 인식과 스트리밍 두 기능을 모두 사용해야 하기 때문에 얼굴 인식을 외부에서 진행하는 아이디어 모색.
        * ESP32-CAM에서 AWS 서비스에 캡쳐한 이미지를 전송하면, AWS Lambda 또는 서버에서 얼굴 인식 로직 진행하는 방식

    * 또 다른 이슈 : ESP32-CAM에서는 3Mb 메모리만 사용 가능. 다양한 라이브러리에서 헤더 파일을 임포트 하는 경우   
    메모리 오버플로우가 날 가능성이 있기에 ESP32-CAM을 메인 로직 디바이스로 하지말고   
    ESP32를 메인 로직 디바이스로 해야 할 것 같음.

## 결론
### ESP32
*  ESP32-CAM에서 얼굴 인식 로직 수행하지 않음 → ESP32-CAM에서 캡쳐한
* 사진을 **AWS** **Lambda**나 **S3**로 전송
* ESP32-CAM에서 메인 로직을 메모리 스펙 부족으로 인해 수행하지 않음 → ESP32에서 진행.

### IoT   
* AWS Lambda 또는 서버에 얼굴인식 AI 모델 배포 필요
* 그 외 ESP32와 서버 간의 통신 조율 필요.
    * ESP32 : 센서 전송 포맷 등
    * 서버 : 부저 트리거 API  등
 
### 서버
* 좌석 현황 API 작성 필요
    * 좌석 예약
    * 좌석 상태 변경
    * 부저 트리거 API 작성 필요

### 클라이언트
* 좌석 관련하여 서버와의 조율 필요
    * 시간 포맷
* 좌석 expired 로직 테스트

